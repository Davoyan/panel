---
title: Summing up Config&Profiles
authors: remnawave
tags: [misc]
date: 2025-06-30
---

В этой статье мы проведем небольшой обзор новой системы – Профилей Конфигураций и Внутренних Сквадов, которая будет доступна с релизом 2.0 (который планируется в середине июля/начале августа 2025-ого года).

<!-- truncate -->

## Как это реализивано в 1.x?

Итак, в версии 1.x это работает довольно просто и банально.

У нас есть центральный конфиг ядра – Xray Config (в соотвествующем разделе в админ-панели). Из этого конфига панель извлекает все **Inbound** тэги.

При подключении Remnawave Node вы можете выбрать активные Inbound-тэги, которые будут отправлены непосредственно в эту конкретную ноду.

С другой стороны, при карточке пользователя вы так же выбираете активные Inbound-тэги, которые будут доступны для этого пользователя.

Такой базовый подход хоть и довольно просто реализован, но имеет ряд недостатков:

- **Конфигурация ядра глобально – одна для всех нод.**  
  Если вам жизненно необходимо иметь полностью разные конфиги на каждой ноде – это начинает быть серьезной проблемой.
- **При большом количество Inbound'ов менеджмент пользователей начинает приносить головную боль.**  
  Из-за того, что пользователь привязывается напрямую к определенным Inbound тегам и при их частом изменении, менеджмент пользователей становится очень сложным.
- **Редактирования конфига = перезапуск всех нод.**

<img src={require('./remnawave_1x_sum.png').default} width="100%" style={{borderRadius: '8px'}} alt="Remna Wave 1x Sum" />

Эту систему можно отобразить в виде упрощенной схемы выше.

И закрепим материал: глобально у нас есть один ядра, в карточке ноды мы выбираем какие Inbound тэги будут физически присутствовать на этой ноде, а затем в карточке пользователя мы выбираем какие Inbound тэги будут доступны для этого пользователя. По итогу Remnawave при старте ноды собирает готовый конфиг и отправляет его в ядро.

## Как это будет в 2.x?

Начиная с версии 2.0, мы вводим новые понятия в рамках панели:

- **Профили конфигурации** (Config Profiles) – каждый **профиль конфигурации** – это полноценный конфиг ядра. Вы можете создать сколько угодно профилей конфигурации – но Inbound-тэги должны быть глобально уникальные. После сохранения профиля, Remnawave извлечет все Inbound-тэги из этого профиля и сохранит их в базу данных.
- **Внутренние сквады** (Internal Squads) – пользовательские группы. В каждом из сквадов вы можете выбрать какие Inbound-тэги будут доступны для конкретно этого сквада. Можно выбирать любые Inbound-тэги со всех доступных **Профилей конфигурации**.

### Профили конфигурации (Config Profiles) {#config-profiles}

<img src={require('./config_profiles_preview_1.png').default} width="100%" style={{borderRadius: '8px'}} alt="Config Profiles Preview 1" />

В новом разделе **Профили конфигурации** вы сможете создавать новые профили, скачать JSON-файл уже существующего профиля, а так же удалить профиль.

Редактор в целом не претерпел изменений и выглядит так же, как и раньше.

<img src={require('./config_profiles_preview_2.png').default} width="100%" style={{borderRadius: '8px'}} alt="Config Profiles Preview 1" />

Как уже упоминалось выше – каждый **Профиль конфигурации** – это полноценный конфиг ядра, которые включает в себя не только массив с Inbounds, но и всю остальную конфигурацию ядра.

Плавно перейдем в раздел **Ноды** и посмотрим, как теперь будет выглядеть выбор Inbound-тэгов для ноды.

<img src={require('./config_profiles_preview_3.png').default} width="100%" style={{borderRadius: '8px'}} alt="Config Profiles Preview 1" />

<img src={require('./config_profiles_preview_4.png').default} width="100%" style={{borderRadius: '8px'}} alt="Config Profiles Preview 1" />

Итак, мы видим, что в новой системе мы можем выбрать **Профиль конфигурации**, который будет активен на конкретной ноде, **а так же выбрать какие Inbound-тэги из выбранного Профиля будут активированы на этой ноде**.

Просуммируем:

- Вы можете создавать сколько угодно **Профилей конфигурации** – но Inbound-тэги должны быть глобально уникальные.
- Вы можете выбрать **Профиль конфигурации** для ноды, а так же выбрать какие Inbound-тэги из выбранного Профиля будут активированы на этой ноде.

### Внутренние сквады (Internal Squads) {#internal-squads}

Перейдем к **Внутренним сквадам** (Internal Squads). В общем списке доступна небольшая статистика по сквадам: количество пользователей, количество активных Inbound-тэгов по каждому скваду.

<img src={require('./internal_squads_preview_1.png').default} width="100%" style={{borderRadius: '8px'}} alt="Config Profiles Preview 1" />

<img src={require('./internal_squads_preview_2.png').default} width="100%" style={{borderRadius: '8px'}} alt="Config Profiles Preview 1" />

В карточке редактирования сквада вы сможете выбирать какие Inbound-тэги будут доступны для этого сквада.  
Как уже упоминалось выше – вы можете выбирать любые Inbound-тэги со всех доступных **Профилей конфигурации**.

Внутренние сквады в свою очередь связаны с пользователями.

<img src={require('./internal_squads_preview_3.png').default} width="100%" style={{borderRadius: '8px'}} alt="Config Profiles Preview 1" />

В карточке пользователя вы сможете выбрать к каким сквадам он будет принадлежать. Один пользователь может принадлежать сразу к нескольким сквадам.

Так же в карточке пользователя есть шорткат к быстрому редактированию конкретного сквада.

<img src={require('./internal_squads_preview_4.png').default} width="100%" style={{borderRadius: '8px'}} alt="Config Profiles Preview 1" />

Понятно, что в такой системе уровень абстракции сильно выше и вы, как администратор, не сможете с первого взгляда понять, к каким нодам конкретный пользователь будет иметь доступ. И вот как ее можно решить...

В карточке пользователя доступна новая кнопка – **View Accessible Nodes**.

<img src={require('./internal_squads_preview_5.png').default} width="100%" style={{borderRadius: '8px'}} alt="Config Profiles Preview 1" />

В этом разделе вы сможете увидеть все ноды, к которым пользователь имеет доступ, а так же **увидеть по каким причинам** пользователь имеет доступ к конкретной ноде.

### Итоги

Новую систему можно отобразить в виде схемы ниже.

<img src={require('./remnawave_2x_squads.png').default} width="100%" style={{borderRadius: '8px'}} alt="Remnawave 2x Squads" />

Эта система должна решить ряд вышеозвученных недостатков старой системы. Например, при изменении Профиля конфигурации (конфига ядра) – будут перезапущены только те ноды, которые используют именно этот Профиль Конфигурации, а все остальные ноды останутся в покое.
